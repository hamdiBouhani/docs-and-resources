(self.webpackChunklite=self.webpackChunklite||[]).push([[4560],{74739:(e,n,i)=>{"use strict";i.d(n,{$l:()=>r,_C:()=>d});var t=i(319),a=i.n(t),o=i(88398),d={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AddToCatalogBase_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]},l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AddToCatalogBaseQuery_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"catalogsConnection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"catalogsContainingThis"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"LISTS"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"catalogId"}},{kind:"Field",name:{kind:"Name",value:"catalogItemIds"}}]}},{kind:"Field",name:{kind:"Name",value:"predefinedContainingThis"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"catalogId"}},{kind:"Field",name:{kind:"Name",value:"predefined"}},{kind:"Field",name:{kind:"Name",value:"catalogItemIds"}}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"editCatalogItemsMutation_postViewerEdge"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useAddItemToPredefinedCatalog_postViewerEdge"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"WithToggleInsideCatalog_post"}}]}}].concat(a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"editCatalogItemsMutation_postViewerEdge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PostViewerEdge"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"catalogsConnection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"catalogsContainingThis"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"LISTS"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"catalogId"}},{kind:"Field",name:{kind:"Name",value:"version"}},{kind:"Field",name:{kind:"Name",value:"catalogItemIds"}}]}},{kind:"Field",name:{kind:"Name",value:"predefinedContainingThis"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"catalogId"}},{kind:"Field",name:{kind:"Name",value:"predefined"}},{kind:"Field",name:{kind:"Name",value:"version"}},{kind:"Field",name:{kind:"Name",value:"catalogItemIds"}}]}}]}}]}}]),a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"useAddItemToPredefinedCatalog_postViewerEdge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PostViewerEdge"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"catalogsConnection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"predefinedContainingThis"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"catalogId"}},{kind:"Field",name:{kind:"Name",value:"version"}},{kind:"Field",name:{kind:"Name",value:"predefined"}},{kind:"Field",name:{kind:"Name",value:"catalogItemIds"}}]}}]}}]}}]),a()(o.m.definitions))},r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AddToCatalogBaseQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isPostKind"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"postResult"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"isPostKind"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AddToCatalogBaseQuery_post"}}]}}]}}]}}].concat(a()(l.definitions))}},65331:(e,n,i)=>{"use strict";i.d(n,{a:()=>se});var t=i(67154),a=i.n(t),o=i(6479),d=i.n(o),l=i(63038),r=i.n(l),s=i(64718),c=i(67294),u=i(59713),m=i.n(u),g=i(319),v=i.n(g),k=i(39210),p=i(48456),f=i(77355),I=i(93310),C=i(87691),y=i(14646),N=i(78285),b=i(14813),h=i(87529),S=i(61609),E=i(97217);function P(){return(P=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e}).apply(this,arguments)}var w=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.73 3.08A2.21 2.21 0 0 1 5 .94c1.26 0 2.27.97 2.27 2.14v2.44H2.73V3.08zm5.46 2.44V3.08C8.18 1.38 6.74 0 5 0a3.13 3.13 0 0 0-3.18 3.08v2.44c-.49 0-.95.2-1.29.55A1.9 1.9 0 0 0 0 7.39v3.74a1.9 1.9 0 0 0 .53 1.32A1.8 1.8 0 0 0 1.8 13H8.2c.48 0 .94-.2 1.28-.55.34-.35.53-.82.53-1.32V7.4a1.9 1.9 0 0 0-.53-1.32 1.8 1.8 0 0 0-1.28-.55z",fill:"#A8A8A8"});const T=function(e){return c.createElement("svg",P({width:10,height:13,viewBox:"0 0 10 13",fill:"none"},e),w)};var O=i(92305),F=i(54758);function A(e){var n,i,t=e.children,a=e.target,o=e.kind,d=e.catalog,l=e.viewer,s=c.useMemo((function(){if(d.predefined){var e,n=null===(e=a.viewerEdge.catalogsConnection)||void 0===e?void 0:e.predefinedContainingThis.find((function(e){return e.predefined===d.predefined}));return[!!n,null==n?void 0:n.catalogItemIds]}var i,t=null===(i=a.viewerEdge.catalogsConnection)||void 0===i?void 0:i.catalogsContainingThis.find((function(e){return e.catalogId===d.id}));return[!!t,null==t?void 0:t.catalogItemIds]}),[d.predefined,d.id,a.viewerEdge]),u=r()(s,2),m=u[0],g=u[1],v=(0,F.qY)(l.id,d.id,d.version,a.id,o,null!==(n=d.predefined)&&void 0!==n?n:void 0),k=r()(v,2),p=k[0],f=k[1].loading,I=(0,F.Yi)(l.id,d.id,d.version,[{entityId:a.id,entityType:o,catalogItemIds:g||[]}],null!==(i=d.predefined)&&void 0!==i?i:void 0),C=r()(I,2),y=C[0],N=C[1].loading;return t({toggleInsideCatalog:m?y:p,isInsideCatalog:m,loading:f||N})}var _={display:"flex",alignItems:"center",justifyContent:"space-between",paddingBottom:"16px",paddingRight:"5px"},V=function(e){return{marginBottom:"1px","& path":{fill:e.baseColor.border.normal}}};function j(e){var n=e.catalog,i=e.target,t=e.kind,a=e.viewer,o=(0,y.I)();return c.createElement(A,{viewer:a,target:i,kind:t,catalog:n},(function(e){var i=e.toggleInsideCatalog,t=e.isInsideCatalog,a=e.loading,d=n.predefined?(0,O.S6)(n.predefined):n.name;return c.createElement("div",{className:o(_)},c.createElement(S.X,{key:n.id,checked:t,checkboxStyle:"OBVIOUS",onChange:i,disabled:a||n.visibility===E.n2.LOCKED,textScale:"L",clampText:1},d),n.visibility!==E.n2.PUBLIC&&c.createElement(f.x,{paddingLeft:"8px"},c.createElement(T,{className:o(V)})))}))}function x(e){var n=e.target,i=e.kind,t=e.catalogs,a=e.isLoading,o=e.viewer,d=e.fetchMore,l=e.scrollableEl;return a?c.createElement(f.x,{display:"flex",justifyContent:"center",padding:"40px 0"},c.createElement(C.F,{color:"DARKER",scale:"L",tag:"div"},c.createElement(h.T,null))):t?c.createElement(b.P,{fetchMore:d,scrollableEl:l},t.map((function(e){return c.createElement(j,{viewer:o,key:e.id,catalog:e,target:n,kind:i})}))):null}function D(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function R(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?D(Object(i),!0).forEach((function(n){m()(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var L={maxHeight:"240px",overflowY:"auto",padding:"24px 20px 16px 24px"};function B(e){var n,i,t,a=e.target,o=e.kind,d=e.showCreateModal,l=e.hidePanel,r=e.viewer,u=c.useRef(null),m=(0,y.I)(),g=(0,k.Ln)({limit:k.W,userId:r.id}),b=(0,N.w)(),h=(0,s.a)(p.D,{variables:g}),S=h.data,E=h.error,P=h.loading,w=h.fetchMore;c.useEffect((function(){E&&b({toastStyle:"RETRYABLE_ERROR",duration:4e3})}),[E]);var T,O=c.useCallback((function(){d(),l()}),[d,l]),F=null==S?void 0:S.catalogsByUser.catalogs;return F&&"Catalog"===(null==S||null===(n=S.readingList)||void 0===n?void 0:n.__typename)&&(F=[S.readingList].concat(v()(F))),null!=S&&null!==(i=S.catalogsByUser)&&void 0!==i&&null!==(t=i.paging)&&void 0!==t&&t.nextPageCursor&&(T=function(){return w({variables:R(R({},g),{},{pagingOptions:R(R({},g.pagingOptions),{},{cursor:{id:S.catalogsByUser.paging.nextPageCursor.id}})})})}),c.createElement(f.x,{width:"300px"},c.createElement("div",{className:m(L),ref:u},c.createElement(x,{target:a,kind:o,viewer:r,catalogs:F,isLoading:P,fetchMore:T,scrollableEl:u.current})),!P&&c.createElement(f.x,{borderTop:"BASE_LIGHTER",padding:"20px 24px 24px"},c.createElement(C.F,{color:"ACCENT",scale:"L"},c.createElement(I.r,{onClick:O},"Create new list"))))}var M=i(63508),H=i(28655),K=i.n(H),U=i(50361),$=i.n(U),z=i(92471),Q=i(21919),W=i(12476),Y=i(18627),q=i(11462);function G(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function J(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?G(Object(i),!0).forEach((function(n){m()(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):G(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function X(){var e=K()(["\n  fragment useAddItemToPredefinedCatalog_postViewerEdge on PostViewerEdge {\n    id\n    catalogsConnection {\n      predefinedContainingThis {\n        catalogId\n        version\n        predefined\n        catalogItemIds\n      }\n    }\n  }\n"]);return X=function(){return e},e}function Z(){var e=K()(["\n  mutation AddToPredefinedCatalog(\n    $type: PredefinedCatalogType!\n    $operation: PredefinedCatalogAddOperationInput!\n  ) {\n    addToPredefinedCatalog(type: $type, operation: $operation) {\n      __typename\n      ... on AddToPredefinedCatalogSucces {\n        version\n        insertedItem {\n          __typename\n          catalogItemId\n          catalogId\n        }\n      }\n    }\n  }\n"]);return Z=function(){return e},e}var ee="temp-catalog-id",ne=(0,z.Ps)(Z()),ie=(0,z.Ps)(X()),te=i(73917),ae=i(66227),oe=i(68894),de=i(74739),le=i(62212);function re(e){var n=e.children,i=e.isPanelVisible,t=e.hidePanel,a=e.togglePanel,o=e.target,d=e.kind,l=e.viewer,s=e.bookmarkIcon,u=e.isInACatalog,m=e.isInReadingList,g=e.catalogsCount,v=e.popoverDisplay,k=(0,oe.O)(!1),p=r()(k,3),f=p[0],I=p[1],C=p[2],y=function(e,n,i,t){var a=(0,Y.Av)(),o=(0,Q.D)(ne,{variables:{type:n,operation:{preprend:{type:t,id:i}}},optimisticResponse:{addToPredefinedCatalog:{__typename:"AddToPredefinedCatalogSucces",version:F.xt,insertedItem:{__typename:"CatalogItemV2",catalogId:ee,catalogItemId:F.PH}}},onCompleted:function(e){if("AddToPredefinedCatalogSucces"===e.addToPredefinedCatalog.__typename&&t===E.ej.POST){var n=e.addToPredefinedCatalog.insertedItem;a.event("post.addToList",{listId:n.catalogId,postId:n.catalogItemId})}},update:function(a,o){var d,l=null===(d=o.data)||void 0===d?void 0:d.addToPredefinedCatalog;if("AddToPredefinedCatalogSucces"===(null==l?void 0:l.__typename)){var r,s,c=l.insertedItem,u=l.version;if(c.catalogId!==ee&&((0,W.UV)(a,c.catalogId,u),(0,W.Rx)(a,c.catalogId,[c.catalogItemId],t)),t===E.ej.POST){r="PostViewerEdge:".concat((0,q.Q)(i,e)),s=ie;var m=a.readFragment({id:r,fragment:s});if(null!=m&&m.catalogsConnection){var g=$()(m.catalogsConnection.predefinedContainingThis),v=g.findIndex((function(e){return e.predefined===n}));if(-1!==v)g[v].catalogItemIds.push(c.catalogItemId);else{var k={catalogId:c.catalogId,predefined:n,version:u,catalogItemIds:[c.catalogItemId]};g.push(k)}a.writeFragment({id:r,fragment:s,data:J(J({},m),{},{catalogsConnection:J(J({},m.catalogsConnection),{},{predefinedContainingThis:g})})})}}}}});return r()(o,1)[0]}(l.id,E.l8.READING_LIST,o.id,d),N=c.useCallback((function(){a(),m||u||y()}),[a,u,m,y]);return c.createElement(te.J,{isVisible:i,popoverRenderFn:function(){return c.createElement(B,{showCreateModal:I,hidePanel:t,target:o,kind:d,viewer:l})},hide:t,targetDistance:15,referenceWidth:"100%",display:v},c.createElement(M.a,{isVisible:f,hide:C,target:o,kind:d,viewer:l}),null==n?void 0:n({onClick:N,bookmarkIcon:s,catalogsCount:g,isPanelVisible:i}))}function se(e){var n,i,t,o=e.viewer,l=e.defaultToBookmarkIcon,r=d()(e,["viewer","defaultToBookmarkIcon"]),u=c.useMemo((function(){return r.kind===E.ej.POST?{postId:r.target.id,isPostKind:!0}:{postId:"",isPostKind:!1}}),[r.kind,r.target]),m=(0,s.a)(de.$l,{ssr:!1,variables:u}).data,g=null,v=null;"Post"===(null==m||null===(n=m.postResult)||void 0===n?void 0:n.__typename)&&(g=m.postResult.viewerEdge.catalogsConnection,v=m.postResult);var k=(null===(i=g)||void 0===i?void 0:i.catalogsContainingThis)&&g.catalogsContainingThis.length>0,p=c.useMemo((function(){var e,n;return!!(null===(e=g)||void 0===e||null===(n=e.predefinedContainingThis)||void 0===n?void 0:n.find((function(e){return e.predefined===E.l8.READING_LIST})))}),[g]),f=c.useMemo((function(){var e;return((null===(e=g)||void 0===e?void 0:e.catalogsContainingThis.length)||0)+(p?1:0)}),[null===(t=g)||void 0===t?void 0:t.catalogsContainingThis.length,p]),I=c.createElement(le.l,{insideACatalog:!!k||p});return u.isPostKind?o&&g&&v?c.createElement(ae.B,null,(function(e){var n=e.isVisible,i=e.toggle,t=e.hide;return c.createElement(re,a()({},r,{target:v,viewer:o,isPanelVisible:n,togglePanel:i,hidePanel:t,bookmarkIcon:I,isInACatalog:!!k,isInReadingList:p,catalogsCount:f}))})):l||!r.children?I:r.children({onClick:function(){return null},bookmarkIcon:I,catalogsCount:f,isPanelVisible:!1}):null}},62212:(e,n,i)=>{"use strict";i.d(n,{l:()=>k,K:()=>u});var t=i(67294),a=i(14646);function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e}).apply(this,arguments)}var d=t.createElement("path",{d:"M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5v-2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4V5.75z",fill:"#000"});const l=function(e){return t.createElement("svg",o({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),d)};function r(){return(r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e}).apply(this,arguments)}var s=t.createElement("path",{d:"M7.5 3.75a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-14a2 2 0 0 0-2-2h-9z",fill:"#000"});const c=function(e){return t.createElement("svg",r({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),s)};var u=function(e){return{"& path":{fill:e.baseColor.border.darker}}},m=function(e){return{"& path":{fill:e.baseColor.fill.darker}}},g=function(){var e=(0,a.I)();return t.createElement(l,{className:e(u)})},v=function(){var e=(0,a.I)();return t.createElement(c,{className:e(m)})};function k(e){return e.insideACatalog?t.createElement(v,null):t.createElement(g,null)}},70836:(e,n,i)=>{"use strict";i.d(n,{U:()=>a});var t=i(319),a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MultiVoteCount_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostVotersNetwork_post"}}]}}].concat(i.n(t)()([{kind:"FragmentDefinition",name:{kind:"Name",value:"PostVotersNetwork_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"voterCount"}},{kind:"Field",name:{kind:"Name",value:"recommenders"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]))}},43220:(e,n,i)=>{"use strict";i.d(n,{UL:()=>l,KW:()=>r,Iq:()=>s,C5:()=>c});var t=i(28655),a=i.n(t),o=i(92471);function d(){var e=a()(["\n  fragment auroraHooks_publisher on Publisher {\n    __typename\n    ... on Collection {\n      isAuroraEligible\n      isAuroraVisible\n      viewerEdge {\n        id\n        isEditor\n      }\n    }\n    ... on User {\n      isAuroraVisible\n    }\n  }\n"]);return d=function(){return e},e}var l=function(e){return!!e&&(e.isAuroraVisible||"Collection"===e.__typename&&e.isAuroraEligible&&e.viewerEdge.isEditor)},r=function(e){return!!e&&e.isAuroraVisible},s=function(e){return!!e&&("Collection"===e.__typename?e.isAuroraVisible||e.isAuroraEligible&&e.viewerEdge.isEditor:e.isAuroraVisible)},c=(0,o.Ps)(d())}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/4560.29409cc1.chunk.js.map